branches:
  only:
    - master

version: 0.1.{build}-beta

os: Visual Studio 2015
install:
  - set PATH=C:\Program Files (x86)\MSBuild\14.0\Bin;%PATH%

before_build:
  nuget restore "src/YAWL.Composition/YAWL.Composition.sln"

configuration: AppVeyor
platform: Any CPU

build:
  parallel: true
  project: src/YAWL.Composition/YAWL.Composition.sln
  verbosity: normal
  publish_nuget: true
  
after_build:
  - ps: nuget pack src/YAWL.Composition/YAWL.Composition/YAWL.Composition.csproj -Version $env:APPVEYOR_BUILD_VERSION
artifacts:
  - path: '**\YAWL.Composition.*.nupkg'

deploy:
  provider: NuGet
  api_key:
    secure: LT8bWnUXsN/QwIft5V3jlpmBFz9k5TXXceJ8j42eHYOD79VJ9jaf+qlxq2vy173K
